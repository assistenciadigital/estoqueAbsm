Calendar.setup=function(e){function g(i,h){if(typeof e[i]=="undefined"){e[i]=h}}g("inputField",null);g("displayArea",null);g("button",null);g("eventName","click");g("ifFormat","y/mm/dd");g("daFormat","y/mm/dd");g("singleClick",true);g("disableFunc",null);g("mondayFirst",false);g("align","Bl");g("range",[1900,2999]);g("weekNumbers",true);g("flat",null);g("flatCallback",null);var c=["inputField","displayArea","button"];for(var f in c){if(typeof e[c[f]]=="string"){e[c[f]]=document.getElementById(e[c[f]])}}if(!(e.flat||e.inputField||e.displayArea||e.button)){alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code");return false}function d(h){if(h.params.flat){if(typeof h.params.flatCallback=="function"){h.params.flatCallback(h)}else{alert("No flatCallback given -- doing nothing.")}return false}if(h.params.inputField){h.params.inputField.value=h.date.print(h.params.ifFormat)}if(h.params.displayArea){h.params.displayArea.innerHTML=h.date.print(h.params.daFormat)}if(h.params.singleClick&&h.dateClicked){h.callCloseHandler()}}if(e.flat!=null){e.flat=document.getElementById(e.flat);if(!e.flat){alert("Calendar.setup:\n  Flat specified but can't find parent.");return false}var b=new Calendar(e.mondayFirst,null,d);b.params=e;b.weekNumbers=e.weekNumbers;b.setRange(e.range[0],e.range[1]);b.setDisabledHandler(e.disableFunc);b.create(e.flat);b.show();return false}var a=e.button||e.displayArea||e.inputField;a["on"+e.eventName]=function(){var h=e.inputField||e.displayArea;var i=e.inputField?e.ifFormat:e.daFormat;var j=false;if(!window.calendar){window.calendar=new Calendar(e.mondayFirst,null,d,function(k){k.hide()});window.calendar.weekNumbers=e.weekNumbers;j=true}else{window.calendar.hide()}window.calendar.setRange(e.range[0],e.range[1]);window.calendar.params=e;window.calendar.setDisabledHandler(e.disableFunc);window.calendar.setDateFormat(i);if(j){window.calendar.create()}window.calendar.parseDate(h.value||h.innerHTML);window.calendar.refresh();window.calendar.showAtElement(e.displayArea||e.inputField,e.align);return false}};